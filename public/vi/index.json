[
{
	"uri": "/vi/",
	"title": "Triển khai Lambda@Edge với CloudFront Advanced Features",
	"tags": [],
	"description": "",
	"content": "Workshop AWS: Lambda@Edge \u0026amp; CloudFront Advanced Features Tổng quan Trong workshop này, bạn sẽ tìm hiểu cách triển khai Edge Computing với AWS bằng cách sử dụng Amazon CloudFront kết hợp Lambda@Edge.\nBạn sẽ thực hành cá nhân hoá (personalization), bảo mật (security), thực hiện A/B testing mà không cần backend, và tối ưu chi phí/hiệu năng với Edge Locations.\nNội dung  Giới thiệu Các bước chuẩn bị Kết nối, kiểm tra \u0026amp; xác minh chức năng Ghi log session \u0026amp; đo hiệu năng CloudFront Phân tích chi phí \u0026amp; tối ưu vị trí Edge Dọn dẹp tài nguyên    💡 Lưu ý:\n Đảm bảo bạn có IAM Role \u0026amp; Policy phù hợp để chạy Lambda@Edge và quản lý CloudFront. Xóa các resource sau khi lab hoàn tất để tránh phát sinh phí không cần thiết.   "
},
{
	"uri": "/vi/1-introduce/",
	"title": "Giới thiệu",
	"tags": [],
	"description": "",
	"content": "Trong kiến trúc hiện đại, việc xử lý logic gần người dùng (tại biên mạng) giúp giảm độ trễ, cải thiện hiệu suất và trải nghiệm người dùng. Lambda@Edge là một dịch vụ của AWS cho phép bạn chạy các hàm Lambda tại edge location của Amazon CloudFront, hỗ trợ xử lý HTTP request và response trước khi đến hoặc rời khỏi origin (ví dụ: S3, API Gateway…).\nWorkshop này sẽ hướng dẫn bạn xây dựng một hệ thống phân phối nội dung thông minh, tích hợp các tính năng nâng cao của CloudFront và Lambda@Edge bao gồm:\n Phân phối nội dung theo vị trí địa lý (Geo-based routing): chuyển hướng người dùng đến nội dung phù hợp với quốc gia của họ. A/B Testing không cần backend: phân phối nội dung thử nghiệm (A/B) hoàn toàn serverless Tăng cường bảo mật: chặn truy cập theo User-Agent hoặc quốc gia, thêm HTTP security headers Ghi log \u0026amp; theo dõi hiệu năng: thu thập dữ liệu và giám sát CloudFront bằng log tùy biến Tối ưu chi phí \u0026amp; lựa chọn vùng edge: đánh giá chi phí và độ trễ tại các vị trí biên.  Kết quả cuối cùng, bạn sẽ triển khai được kiến trúc phân phối tĩnh hiện đại, bảo mật, có khả năng mở rộng cao và giảm chi phí cho ứng dụng web.\n"
},
{
	"uri": "/vi/2-prerequiste/2.1-create-s3/",
	"title": "Tạo S3 Bucket",
	"tags": [],
	"description": "",
	"content": "🎯 Mục tiêu Tạo một S3 bucket để lưu trữ website tĩnh, đóng vai trò origin cho CloudFront.\n 🛠️ Các bước thực hiện   Mở AWS Management Console → Dịch vụ S3\nTruy cập AWS S3 Console.\n  Tạo Bucket mới\n  Nhấn Create bucket\n  Tên bucket: lambda-edge-demo-site\n  Chọn Region: us-east-1 (bắt buộc cho Lambda@Edge)\n  Bỏ chọn Block all public access\n  Xác nhận cảnh báo quyền public\n  Nhấn Create bucket để tạo\n    Upload Website\n Tạo file index.html với nội dung:    \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34;\u0026gt; \u0026lt;title\u0026gt;Lambda@Edge Workshop\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;h1\u0026gt;Welcome to AWS Lambda@Edge Workshop\u0026lt;/h1\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt;  Nhấn vào bucket vừa tạo để Upload\n   Bật Static Website Hosting\n Vào bucket → Chọn tab Properties Kéo xuống phần Static website hosting → Nhấn Edit Chọn Enable Nhập:  Index document: index.html Error document: index.html (hoặc file lỗi riêng nếu có)   Nhấn Save changes    Thiết lập Bucket Policy (Public Access)\n Chọn tab Permissions → Bucket Policy → Nhấn Edit Dán policy (đổi lambda-edge-demo-site thành tên bucket của bạn):    { \u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;, \u0026#34;Statement\u0026#34;: [ { \u0026#34;Sid\u0026#34;: \u0026#34;PublicReadGetObject\u0026#34;, \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, \u0026#34;Principal\u0026#34;: \u0026#34;*\u0026#34;, \u0026#34;Action\u0026#34;: \u0026#34;s3:GetObject\u0026#34;, \u0026#34;Resource\u0026#34;: \u0026#34;arn:aws:s3:::lambda-edge-demo-site/*\u0026#34; } ] }  Nhấn Save  "
},
{
	"uri": "/vi/2-prerequiste/",
	"title": "Các bước chuẩn bị",
	"tags": [],
	"description": "",
	"content": "🎯 Mục tiêu Trong phần này, bạn sẽ thực hiện các bước chuẩn bị cần thiết để triển khai AWS Lambda@Edge Workshop, bao gồm:\n 🔑 Nội dung chuẩn bị   Tạo website tĩnh bằng S3\n Tạo bucket S3 để lưu trữ nội dung website. Bật Static Website Hosting và cấu hình Bucket Policy cho phép truy cập public.    Tạo CloudFront Distribution\n Phân phối website toàn cầu với độ trễ thấp bằng Amazon CloudFront. Cấu hình caching, SSL certificate, và behavior để tối ưu tốc độ.    Tạo Lambda@Edge Functions\n Viết và deploy các Lambda Functions chạy tại các Edge Location của CloudFront. Dùng cho cá nhân hóa nội dung (Geo Redirect, A/B Testing) và bảo mật (User-Agent, Country Blocking).     ⚠️ Lưu ý:\n Các bước cần thực hiện lần lượt để tránh lỗi phân quyền và truy cập. Khi làm trên AWS Console, nên bật AWS Region us-east-1 để Lambda@Edge hoạt động chính xác.   👉 Chọn các mục con trong menu để bắt đầu.\n"
},
{
	"uri": "/vi/2-prerequiste/2.3-create-lambdaedge/2.3.1-ab-testing/",
	"title": "Triển khai A/B Testing với Lambda@Edge",
	"tags": [],
	"description": "",
	"content": "🎯 Mục tiêu Sử dụng AWS Lambda@Edge để triển khai A/B Testing mà không cần backend. Người dùng được phân phối ngẫu nhiên giữa hai phiên bản website tĩnh được lưu trên S3.\n Bước 1 – Tạo Lambda Function   Mở AWS Management Console → Tìm và chọn Lambda.\n  Nhấn Create function.   Chọn Author from scratch, sau đó nhập:\n Function name: ab-testing Runtime: Node.js 18.x Architecture: x86_64     Ở phần Permissions, chọn:\n Create a new role with basic Lambda permissions.    Nhấn Create function để tạo mới.    Bước 2 – Viết code A/B Testing  Sau khi tạo, mở function ab-testing. Chọn tab Code, xóa code mặc định và thêm đoạn code sau:  \u0026#39;use strict\u0026#39;; exports.handler = async (event) =\u0026gt; { const request = event.Records[0].cf.request; const random = Math.random(); if (random \u0026lt; 0.5) { request.uri = \u0026#39;/index-v1.html\u0026#39;; } else { request.uri = \u0026#39;/index-v2.html\u0026#39;; } return request; }; Nhấn Deploy để lưu code 🔑 Cấu hình IAM Role và Policy Để tránh lỗi khi triển khai Lambda@Edge, cần cấu hình Role với đầy đủ quyền:\n 1️⃣ Gắn Policy cần thiết  AWSLambdaBasicExecutionRole: Cho phép Lambda ghi log vào CloudWatch. AWSLambdaRole: Quyền cơ bản để Lambda hoạt động và tích hợp với dịch vụ AWS.  Cách thực hiện  Vào AWS Console → IAM → Roles. Chọn Role đang gắn với Lambda Function (ví dụ: ab-testing-role). Chọn tab Permissions → Attach policies. Tìm và chọn:  AWSLambdaBasicExecutionRole AWSLambdaRole   Nhấn Attach policy để lưu. Kiểm tra lại, trong tab Permissions phải có đủ 2 policy này.    2️⃣ Sửa Trust Relationship  Vào IAM → Roles → ab-testing-role (hoặc role bạn tạo). Chọn tab Trust relationships → Edit trust policy. Thay nội dung bằng:  { \u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;, \u0026#34;Statement\u0026#34;: [ { \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, \u0026#34;Principal\u0026#34;: { \u0026#34;Service\u0026#34;: [ \u0026#34;lambda.amazonaws.com\u0026#34;, \u0026#34;edgelambda.amazonaws.com\u0026#34; ] }, \u0026#34;Action\u0026#34;: \u0026#34;sts:AssumeRole\u0026#34; } ] } Sau khi them code Bước 3 – Publish Lambda Version Lambda@Edge yêu cầu một published version cụ thể và không thể sử dụng $LATEST.\n Trong Lambda function → Nhấn Actions → Publish new version Nhập Description (ví dụ: Initial AB Testing version) Nhấn Publish để tạo version cố định (ví dụ: Version 1)\n  Bước 4 – Deploy Lambda@Edge  Trong Lambda → Nhấn Actions → Deploy to Lambda@Edge\n Chọn:  CloudFront Distribution: Distribution đã tạo CloudFront event: Viewer Request Region: us-east-1   Nhấn Deploy và đợi vài phút để Lambda được sao chép toàn cầu.\n   Bước 5 – Upload website  Vào S3 bucket chứa website. Upload:  index-v1.html    \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;vi\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34;\u0026gt; \u0026lt;meta name=\u0026#34;viewport\u0026#34; content=\u0026#34;width=device-width, initial-scale=1.0\u0026#34;\u0026gt; \u0026lt;title\u0026gt;Công Nghệ Đám Mây - AWS Workshop\u0026lt;/title\u0026gt; \u0026lt;link rel=\u0026#34;preconnect\u0026#34; href=\u0026#34;https://fonts.googleapis.com\u0026#34;\u0026gt; \u0026lt;link rel=\u0026#34;preconnect\u0026#34; href=\u0026#34;https://fonts.gstatic.com\u0026#34; crossorigin\u0026gt; \u0026lt;link href=\u0026#34;https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700\u0026amp;display=swap\u0026#34; rel=\u0026#34;stylesheet\u0026#34;\u0026gt; \u0026lt;style\u0026gt; :root { --primary: #FF9900; --primary-dark: #E88A00; --secondary: #232F3E; --accent: #00A1E0; --text: #1A1A1A; --text-light: #4B5563; --background: #FFFFFF; --light-gray: #F3F4F6; --border: #E5E7EB; --rounded-sm: 4px; --rounded-md: 8px; --rounded-lg: 12px; --shadow-sm: 0 1px 3px rgba(0,0,0,0.1); --shadow-md: 0 4px 6px rgba(0,0,0,0.1); --shadow-lg: 0 10px 25px rgba(0,0,0,0.1); } body { font-family: \u0026#39;Inter\u0026#39;, sans-serif; } \u0026lt;/style\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;header\u0026gt; \u0026lt;h1\u0026gt;Làm chủ công nghệ đám mây với AWS\u0026lt;/h1\u0026gt; \u0026lt;/header\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt;  index-v2.html  \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;vi\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34;\u0026gt; \u0026lt;meta name=\u0026#34;viewport\u0026#34; content=\u0026#34;width=device-width, initial-scale=1.0\u0026#34;\u0026gt; \u0026lt;title\u0026gt;Công Nghệ Đám Mây - AWS Workshop\u0026lt;/title\u0026gt; \u0026lt;link rel=\u0026#34;preconnect\u0026#34; href=\u0026#34;https://fonts.googleapis.com\u0026#34;\u0026gt; \u0026lt;link rel=\u0026#34;preconnect\u0026#34; href=\u0026#34;https://fonts.gstatic.com\u0026#34; crossorigin\u0026gt; \u0026lt;link href=\u0026#34;https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700\u0026amp;display=swap\u0026#34; rel=\u0026#34;stylesheet\u0026#34;\u0026gt; \u0026lt;style\u0026gt; :root { --primary: #00A1E0; --primary-dark: #E88A00; --secondary: #232F3E; --accent: #00A1E0; --text: #1A1A1A; --text-light: #4B5563; --background: #FFFFFF; --light-gray: #F3F4F6; --border: #E5E7EB; --rounded-sm: 4px; --rounded-md: 8px; --rounded-lg: 12px; --shadow-sm: 0 1px 3px rgba(0,0,0,0.1); --shadow-md: 0 4px 6px rgba(0,0,0,0.1); --shadow-lg: 0 10px 25px rgba(0,0,0,0.1); } body { font-family: \u0026#39;Inter\u0026#39;, sans-serif; } \u0026lt;/style\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;header\u0026gt; \u0026lt;h1\u0026gt;Làm chủ công nghệ đám mây với AWS - Version B\u0026lt;/h1\u0026gt; \u0026lt;/header\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt;  Đảm bảo file có quyền public hoặc dùng OAC.   Bước 6 – Kiểm tra  Mở CloudFront Domain Name trên trình duyệt. Refresh nhiều lần:  Một số lượt hiển thị Version A\n Một số lượt hiển thị Version B    Xác nhận Lambda hoạt động đúng, phân phối 50/50.  "
},
{
	"uri": "/vi/2-prerequiste/2.3-create-lambdaedge/2.3.2-geo-redirect/",
	"title": "Triển khai Geo Redirect với Lambda@Edge",
	"tags": [],
	"description": "",
	"content": "🎯 Mục tiêu  Tự động chuyển hướng người dùng đến trang web phù hợp với quốc gia của họ. Sử dụng AWS Lambda@Edge (gắn vào CloudFront) để redirect trước khi request đến S3. Hỗ trợ nhiều ngôn ngữ, dễ mở rộng trong tương lai.   1️⃣ Kiến trúc tổng quan  Người dùng → CloudFront Distribution. CloudFront gửi thông tin CloudFront-Viewer-Country. Lambda@Edge đọc header và xác định quốc gia. Lambda trả về HTTP 302 Redirect đến trang ngôn ngữ tương ứng. Trình duyệt tải nội dung từ S3 bucket chứa các phiên bản ngôn ngữ.   2️⃣ Tạo Lambda Function  Đăng nhập AWS Management Console → Lambda. Nhấn Create function → Author from scratch. Điền:  Function name: geo-redirect Runtime: Node.js 18.x Architecture: x86_64   Permissions: chọn Create a new role with basic Lambda permissions. Nhấn Create function.    3️⃣ Viết Code Geo Redirect \u0026#39;use strict\u0026#39;; exports.handler = async (event) =\u0026gt; { const request = event.Records[0].cf.request; const headers = request.headers; const country = headers[\u0026#39;cloudfront-viewer-country\u0026#39;] ? headers[\u0026#39;cloudfront-viewer-country\u0026#39;][0].value : \u0026#39;US\u0026#39;; const redirectMap = { \u0026#39;VN\u0026#39;: \u0026#39;/vi/index.html\u0026#39;, \u0026#39;FR\u0026#39;: \u0026#39;/fr/index.html\u0026#39;, \u0026#39;US\u0026#39;: \u0026#39;/en/index.html\u0026#39; }; const redirectUrl = redirectMap[country] || \u0026#39;/en/index.html\u0026#39;; return { status: \u0026#39;302\u0026#39;, statusDescription: \u0026#39;Found\u0026#39;, headers: { \u0026#39;location\u0026#39;: [{ key: \u0026#39;Location\u0026#39;, value: redirectUrl }], \u0026#39;cache-control\u0026#39;: [{ key: \u0026#39;Cache-Control\u0026#39;, value: \u0026#39;no-cache\u0026#39; }] }, }; };  Dùng redirectMap để dễ mở rộng. Thêm Cache-Control để tránh cache sai redirect.  Nhấn Deploy để lưu\n 4️⃣ Cấu hình IAM Role và Policy Gắn Policy:  AWSLambdaBasicExecutionRole AWSLambdaRole  Cách làm:\n Vào AWS → IAM → Roles → Chọn role của Lambda. Permissions → Attach policies → Chọn 2 policy trên → Attach.   Sửa Trust Relationship:  IAM → Roles → geo-redirect-role Trust relationships → Edit trust policy Dán:  { \u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;, \u0026#34;Statement\u0026#34;: [ { \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, \u0026#34;Principal\u0026#34;: { \u0026#34;Service\u0026#34;: [ \u0026#34;lambda.amazonaws.com\u0026#34;, \u0026#34;edgelambda.amazonaws.com\u0026#34; ] }, \u0026#34;Action\u0026#34;: \u0026#34;sts:AssumeRole\u0026#34; } ] }  5️⃣ Chuẩn bị nội dung đa ngôn ngữ File HTML:  /en/index.html – English  \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34;\u0026gt; \u0026lt;title\u0026gt;Welcome\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;h1\u0026gt;Welcome to our website!\u0026lt;/h1\u0026gt; \u0026lt;p\u0026gt;This is the English version of the site.\u0026lt;/p\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt;  /vi/index.html – Vietnamese  \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;vi\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34;\u0026gt; \u0026lt;title\u0026gt;Chào mừng\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;h1\u0026gt;Chào mừng bạn đến với website của chúng tôi!\u0026lt;/h1\u0026gt; \u0026lt;p\u0026gt;Đây là phiên bản tiếng Việt của trang.\u0026lt;/p\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt;  /fr/index.html – French  \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;fr\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34;\u0026gt; \u0026lt;title\u0026gt;Bienvenue\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;h1\u0026gt;Bienvenue sur notre site web!\u0026lt;/h1\u0026gt; \u0026lt;p\u0026gt;Ceci est la version française du site.\u0026lt;/p\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; Upload S3:  Mở S3 → Bucket. Create folder: en, vi, fr. Upload index.html tương ứng.  Quyền truy cập:  Demo: Actions → Make public. Production: Dùng CloudFront OAC (không public trực tiếp).    6️⃣ Publish Lambda Version  Vào Lambda → Actions → Publish new version\n Nhập mô tả Initial Geo Redirect version → Publish    7️⃣ Deploy Lambda@Edge  Trong Lambda → Chọn version vừa publish Actions → Deploy to Lambda@Edge  Chọn:  CloudFront Distribution Event: Viewer Request Region: us-east-1   Nhấn Deploy → Chờ vài phút để sao chép toàn cầu.    8️⃣ Kiểm tra  Mở https://\u0026lt;CloudFront-Domain\u0026gt; → Tự động redirect theo quốc gia. Test với VPN hoặc:  curl -I -H \u0026#34;CloudFront-Viewer-Country: VN\u0026#34; https://\u0026lt;CloudFront-Domain\u0026gt;  Kết quả:    9️⃣ Nâng cao  Cookie lưu ngôn ngữ để không redirect lại. Dùng CloudFront Functions nếu chỉ cần logic đơn giản (chi phí thấp hơn). Thêm AWS WAF để điều hướng hoặc chặn theo vùng.  "
},
{
	"uri": "/vi/2-prerequiste/2.2-create-cloudfront/",
	"title": "Tạo CloudFront Distribution",
	"tags": [],
	"description": "",
	"content": "🎯 Mục tiêu Sử dụng Amazon CloudFront để phân phối website tĩnh từ S3 ra toàn cầu với độ trễ thấp, tăng hiệu suất và bảo mật.\n 🛠️ Hướng dẫn chi tiết từng bước  Bước 1 – Mở dịch vụ CloudFront  Truy cập AWS Management Console → Tìm và chọn CloudFront. Nhấn Create Distribution để bắt đầu tạo mới.\n   Bước 2 – Khởi tạo  Distribution name: Nhập tên để dễ quản lý (VD: lambda-edge-distribution). Description: (Tuỳ chọn) Thêm mô tả ngắn. Distribution type: Chọn Single website or app.\n   Bước 3 – Cấu hình Origin  Origin domain: Chọn bucket S3 đã tạo (lambda-edge-demo-site). Origin path: Để trống. Viewer Protocol Policy: Chọn Redirect HTTP to HTTPS để bắt buộc HTTPS. Origin Access:  Nếu demo → để Public. Nếu production → bật Origin Access Control (OAC) để chặn truy cập trực tiếp vào S3.\n     Bước 4 – Bảo mật và Cache Behavior 🔧 Các bước kiểm tra   Truy cập Distribution:\n Mở AWS Management Console → CloudFront → Distributions. Chọn ID của Distribution vừa tạo.    Kiểm tra Behavior:\n Chọn tab Behaviors. Chọn Default (*) Behavior → Edit để xem chi tiết cấu hình.    Xác nhận cấu hình:\n Caching Policy: Đang là CachingOptimized, tối ưu tốc độ phân phối nội dung. Compress objects automatically: Bật (Yes) để nén các file HTML, CSS, JS. Viewer Protocol Policy: Chọn Redirect HTTP to HTTPS để đảm bảo kết nối bảo mật. Allowed HTTP Methods: GET, HEAD (thêm POST nếu website có form hoặc API). TTL: Mặc định là 86400 giây (24h), có thể giữ nguyên.    Bước 5 – Chứng chỉ SSL   SSL/TLS certificate:\n Nếu có tên miền riêng và chứng chỉ trong AWS Certificate Manager (ACM) → chọn Custom SSL Certificate. Nếu không có tên miền riêng → dùng Default CloudFront Certificate (AWS tự cấp chứng chỉ cho domain *.cloudfront.net).    Price class:\n Chọn Use All Edge Locations để phân phối toàn cầu. Hoặc chọn giới hạn khu vực để giảm chi phí.    📌 Lưu ý:\n Nếu chỉ sử dụng domain mặc định (*.cloudfront.net) thì giữ nguyên cấu hình mặc định và bỏ qua phần chứng chỉ tùy chỉnh.  Bước 6 – Lấy Domain Name  Khi trạng thái hiển thị Deployed, sao chép Domain Name (VD: dxxxxxxx.cloudfront.net). Mở domain này trên trình duyệt để kiểm tra website đã phân phối qua CloudFront.   ✅ Kết quả  Website đã được phân phối qua mạng lưới Edge Locations của CloudFront. Người dùng toàn cầu sẽ được phục vụ nội dung từ máy chủ gần nhất → giảm độ trễ, tăng tốc độ tải trang.  "
},
{
	"uri": "/vi/2-prerequiste/2.3-create-lambdaedge/",
	"title": "Tạo Lambda@Edge Functions",
	"tags": [],
	"description": "",
	"content": "🎯 Mục tiêu Trong phần này, bạn sẽ học cách sử dụng AWS Lambda@Edge để mở rộng chức năng của CloudFront và thêm các tính năng nâng cao mà không cần backend truyền thống.\n📌 Các tính năng  🔀 A/B Testing 🌍 Chuyển hướng Geo Redirect (Cá nhân hóa) 🚫 Chặn theo User-Agent hoặc Quốc gia 📊 Ghi log và Giám sát hiệu năng 🛡️ Thêm Security Headers   Mỗi tính năng được trình bày trong một phần riêng với hướng dẫn chi tiết và hàm Lambda mẫu.\n"
},
{
	"uri": "/vi/2-prerequiste/2.3-create-lambdaedge/2.3.3-block-useragent-country/",
	"title": "Chặn truy cập theo User-Agent hoặc Quốc gia với Lambda@Edge",
	"tags": [],
	"description": "",
	"content": "🎯 Mục tiêu Tăng cường bảo mật bằng cách chặn truy cập từ một số User-Agent (ví dụ bot) hoặc quốc gia không mong muốn thông qua AWS Lambda@Edge.\n Bước 1 – Tạo Lambda Function  Mở AWS Management Console → Lambda. Nhấn Create function. Chọn Author from scratch, sau đó nhập:  Function name: block-ua-country Runtime: Node.js 18.x Architecture: x86_64   Ở phần Permissions, chọn:  Create a new role with basic Lambda permissions.   Nhấn Create function để tạo mới.    Bước 2 – Viết code chặn User-Agent hoặc Quốc gia  Sau khi tạo, mở function block-ua-country. Chọn tab Code, xóa code mặc định và thêm đoạn code sau:  \u0026#39;use strict\u0026#39;; exports.handler = async (event) =\u0026gt; { const request = event.Records[0].cf.request; const headers = request.headers; const userAgent = headers[\u0026#39;user-agent\u0026#39;] ? headers[\u0026#39;user-agent\u0026#39;][0].value.toLowerCase() : \u0026#39;\u0026#39;; const country = headers[\u0026#39;cloudfront-viewer-country\u0026#39;] ? headers[\u0026#39;cloudfront-viewer-country\u0026#39;][0].value : \u0026#39;US\u0026#39;; // Chặn bot sử dụng curl hoặc quốc gia Trung Quốc (CN)  if (userAgent.includes(\u0026#39;curl\u0026#39;) || country === \u0026#39;CN\u0026#39;) { return { status: \u0026#39;403\u0026#39;, statusDescription: \u0026#39;Forbidden\u0026#39;, body: \u0026#39;Access denied.\u0026#39;, }; } return request; }; Nhấn Deploy để lưu code.    🔑 Cấu hình IAM Role và Policy 1️⃣ Gắn Policy cần thiết  AWSLambdaBasicExecutionRole AWSLambdaRole  Cách thực hiện:\n Vào AWS Console → IAM → Roles. Chọn Role đang gắn với Lambda Function. Chọn tab Add Permissions → Attach policies. Gắn AWSLambdaBasicExecutionRole và AWSLambdaRole. Nhấn Attach policy để lưu.    2️⃣ Sửa Trust Relationship  Vào IAM → Roles → block-ua-country-role. Chọn tab Trust relationships → Edit trust policy. Thay nội dung bằng:  { \u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;, \u0026#34;Statement\u0026#34;: [ { \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, \u0026#34;Principal\u0026#34;: { \u0026#34;Service\u0026#34;: [ \u0026#34;lambda.amazonaws.com\u0026#34;, \u0026#34;edgelambda.amazonaws.com\u0026#34; ] }, \u0026#34;Action\u0026#34;: \u0026#34;sts:AssumeRole\u0026#34; } ] }  Bước 3 – Publish Lambda Version Lambda@Edge yêu cầu một published version, không thể sử dụng $LATEST.\n Trong Lambda function → Nhấn Actions → Publish new version. Nhập Description (ví dụ: Initial Block UA/Country version). Nhấn Publish để tạo version cố định.    Bước 4 – Deploy Lambda@Edge  Trong Lambda → Chọn version vừa publish. Nhấn Actions → Deploy to Lambda@Edge.  Chọn:  CloudFront Distribution CloudFront event: Viewer Request Region: us-east-1   Nhấn Deploy và đợi vài phút để Lambda được sao chép toàn cầu.    Bước 5 – Kiểm tra  Dùng curl để test User-Agent bị chặn:  curl -I -A \u0026#34;curl/7.79.1\u0026#34; https://\u0026lt;cloudfront-domain\u0026gt;/  Kết quả trả về: 403 Forbidden.  Dùng VPN hoặc header giả lập quốc gia Trung Quốc (CN):  curl -I -H \u0026#34;CloudFront-Viewer-Country: CN\u0026#34; https://\u0026lt;cloudfront-domain\u0026gt;/   Kết quả trả về: 403 Forbidden.\n  Với User-Agent và quốc gia bình thường → website vẫn truy cập được.\n   ✅ Kết quả: Lambda@Edge sẽ chặn truy cập từ User-Agent hoặc quốc gia không mong muốn, trả về mã 403 Forbidden.\n"
},
{
	"uri": "/vi/2-prerequiste/2.3-create-lambdaedge/2.3.4-logging-monitoring/",
	"title": "Ghi log và Giám sát hiệu năng",
	"tags": [],
	"description": "",
	"content": "🎯 Mục tiêu Ghi nhận log chi tiết và theo dõi hiệu năng của ứng dụng với AWS Lambda@Edge và CloudFront:\n Bật ghi log để dễ dàng debug và kiểm soát. Theo dõi hiệu năng qua CloudWatch Metrics và Alarms.   1️⃣ Bật Logging trong Lambda Thêm log để debug và giám sát:\n\u0026#39;use strict\u0026#39;; exports.handler = async (event) =\u0026gt; { const request = event.Records[0].cf.request; const headers = request.headers; const userAgent = headers[\u0026#39;user-agent\u0026#39;] ? headers[\u0026#39;user-agent\u0026#39;][0].value.toLowerCase() : \u0026#39;\u0026#39;; const country = headers[\u0026#39;cloudfront-viewer-country\u0026#39;] ? headers[\u0026#39;cloudfront-viewer-country\u0026#39;][0].value : \u0026#39;US\u0026#39;; console.log(\u0026#34;User-Agent:\u0026#34;, userAgent); console.log(\u0026#34;Country:\u0026#34;, country); if (userAgent.includes(\u0026#39;curl\u0026#39;) || country === \u0026#39;CN\u0026#39;) { console.log(\u0026#34;Access blocked for\u0026#34;, userAgent, country); return { status: \u0026#39;403\u0026#39;, statusDescription: \u0026#39;Forbidden\u0026#39;, body: \u0026#39;Access denied.\u0026#39;, }; } console.log(\u0026#34;Request allowed\u0026#34;); return request; };  Khi Lambda được invoke, log sẽ hiển thị trong CloudWatch → Log Groups → /aws/lambda/us-east-1..    2️⃣ Bật Logging cho CloudFront  Vào AWS CloudFront → Distribution → Settings → Edit. Ở mục Logging, bật:  ✅ Standard Logging: chọn S3 bucket để lưu log. ✅ Real-time logs (tùy chọn): ghi nhận request ngay lập tức.   Lưu thay đổi.    3️⃣ Giám sát hiệu năng với CloudWatch Metrics \u0026amp; Alarms   Vào CloudWatch → Metrics → Lambda → By Function Name.\n  Theo dõi các metrics quan trọng:\n Invocations: Số lần Lambda được gọi. Errors: Số lượng lỗi. Duration: Thời gian thực thi. Throttles: Số lần bị giới hạn.     Tạo CloudWatch Alarms để cảnh báo khi:\n Tỉ lệ lỗi \u0026gt; 5%. Thời gian thực thi vượt mức bình thường.     Bật X-Ray Tracing cho Lambda để phân tích chi tiết request.\n   Mở AWS Lambda Console → Chọn function (ví dụ: block-ua-country). Vào tab Configuration. Ở menu bên trái → Chọn Monitoring and operations tools. Trong mục AWS X-Ray → Tick chọn Active tracing. Nhấn Save để lưu thay đổi.   ✅ Kết quả  Ghi nhận đầy đủ log để dễ dàng debug. Có thể giám sát và cảnh báo hiệu năng của Lambda và CloudFront hiệu quả.  "
},
{
	"uri": "/vi/3-testing/",
	"title": "Kết nối, Test và Xác minh chức năng",
	"tags": [],
	"description": "",
	"content": "🎯 Mục tiêu Đảm bảo ứng dụng Lambda@Edge hoạt động chính xác bằng cách thực hiện kết nối, kiểm thử và xác minh kết quả.\n 1️⃣ Kết nối  Kiểm tra tên miền CloudFront đã được liên kết với Lambda. Sử dụng trình duyệt hoặc công cụ curl để gửi yêu cầu HTTP:  curl -I https://\u0026lt;CloudFront-Domain\u0026gt;  2️⃣ Kiểm thử chức năng  Làm mới nhiều lần để xác nhận rằng các phiên bản khác nhau (A/B testing) hoặc Geo Redirect đang hoạt động. Sử dụng VPN để mô phỏng vị trí địa lý khác và kiểm tra geo-redirect. Mở trình duyệt → F12 → Network để kiểm tra HTTP headers và nội dung trả về.   3️⃣ Xác minh kết quả  Kiểm tra mã trạng thái HTTP trả về:  200 OK → Trang tải bình thường. 302 Found → Geo Redirect hoạt động đúng.   Xác nhận rằng file HTML được phân phối chính xác đến người dùng.  "
},
{
	"uri": "/vi/4-logging-performance/",
	"title": "Ghi Log Session và Đo Hiệu Năng CloudFront",
	"tags": [],
	"description": "",
	"content": "🎯 Mục tiêu Bật ghi log và đo lường hiệu năng để giám sát và tối ưu ứng dụng Lambda@Edge với CloudFront.\n 1️⃣ Ghi log session  Mở AWS CloudFront → Distributions → Settings → Edit. Bật Standard Logging, chọn S3 bucket để lưu log. (Tùy chọn) Bật Real-time logs để xem log tức thời. Kiểm tra trong S3 bucket → Thư mục AWSLogs/\u0026lt;account-id\u0026gt;/CloudFront/.   2️⃣ Đo hiệu năng  Sử dụng CloudWatch Metrics để theo dõi:  Thời gian phản hồi (Latency) Tỷ lệ lỗi (Error rate) Lưu lượng truy cập (Traffic)   Tạo CloudWatch Alarms để cảnh báo khi:  Tỷ lệ lỗi \u0026gt; 5%. Thời gian phản hồi vượt mức cho phép.     3️⃣ Phân tích dữ liệu  Dùng AWS Athena hoặc công cụ phân tích để đọc log từ S3. Xác định bottleneck và tối ưu mã Lambda hoặc cấu hình CloudFront.  "
},
{
	"uri": "/vi/2-prerequiste/2.3-create-lambdaedge/2.3.5-security-headers/",
	"title": "Thêm Security Headers với Lambda@Edge",
	"tags": [],
	"description": "",
	"content": "🎯 Mục tiêu Tăng cường bảo mật ứng dụng bằng cách thêm các HTTP Security Headers vào mọi phản hồi từ CloudFront thông qua AWS Lambda@Edge.\n 1️⃣ Viết code Lambda để thêm Security Headers Sử dụng Lambda@Edge với sự kiện Viewer Response:\n\u0026#39;use strict\u0026#39;; exports.handler = async (event) =\u0026gt; { const response = event.Records[0].cf.response; const headers = response.headers; // Add Security Headers  headers[\u0026#39;strict-transport-security\u0026#39;] = [{ key: \u0026#39;Strict-Transport-Security\u0026#39;, value: \u0026#39;max-age=63072000; includeSubdomains; preload\u0026#39; }]; headers[\u0026#39;content-security-policy\u0026#39;] = [{ key: \u0026#39;Content-Security-Policy\u0026#39;, value: \u0026#34;default-src \u0026#39;self\u0026#39;\u0026#34; }]; headers[\u0026#39;x-content-type-options\u0026#39;] = [{ key: \u0026#39;X-Content-Type-Options\u0026#39;, value: \u0026#39;nosniff\u0026#39; }]; headers[\u0026#39;x-frame-options\u0026#39;] = [{ key: \u0026#39;X-Frame-Options\u0026#39;, value: \u0026#39;DENY\u0026#39; }]; headers[\u0026#39;referrer-policy\u0026#39;] = [{ key: \u0026#39;Referrer-Policy\u0026#39;, value: \u0026#39;same-origin\u0026#39; }]; headers[\u0026#39;permissions-policy\u0026#39;] = [{ key: \u0026#39;Permissions-Policy\u0026#39;, value: \u0026#39;geolocation=(), microphone=()\u0026#39; }]; return response; };  2️⃣ Triển khai Lambda@Edge  Mở Lambda → Nhấn Actions → Publish new version → Nhập mô tả (ví dụ: Add Security Headers). Deploy Lambda với CloudFront event = Viewer Response. Sau khi triển khai, mọi response từ CloudFront sẽ tự động có các security headers này.   3️⃣ Kiểm tra Security Headers Sau khi triển khai Lambda@Edge để thêm các Security Headers, bạn có thể kiểm tra bằng các cách sau:\n🖥️ 1. Sử dụng cURL Chạy lệnh trên máy tính hoặc AWS CloudShell:\ncurl -I https://\u0026lt;CloudFront-Domain\u0026gt; Kết quả chuẩn: HTTP status code 200 OK (hoặc 302 nếu có redirect).\n✅ Kết quả  Tăng cường bảo mật website với các HTTP Security Headers. Giảm thiểu nguy cơ bị tấn công XSS, clickjacking, và dữ liệu bị lộ.  "
},
{
	"uri": "/vi/5-cost-optimization/",
	"title": "Phân tích Chi Phí và Chọn Vị Trí Edge Location Tối Ưu",
	"tags": [],
	"description": "",
	"content": "🎯 Mục tiêu Phân tích chi phí vận hành Lambda@Edge và chọn vị trí Edge Location tối ưu để giảm chi phí và độ trễ.\n 1️⃣ Phân tích chi phí  Vào AWS Cost Explorer:  Xem chi phí Lambda invocations. Phân tích chi phí CloudFront và dữ liệu truyền tải.   Xác định các khu vực gây chi phí cao.   2️⃣ Chọn vị trí Edge Location tối ưu  Sử dụng CloudFront Reports để biết phân bố lưu lượng người dùng. Chọn Edge Location gần người dùng nhất để giảm độ trễ và chi phí truyền tải.   3️⃣ Tối ưu hóa chi phí  Cấu hình Caching và TTL hợp lý để giảm số lần gọi Lambda. Sử dụng Regional Edge Cache cho khu vực ít lưu lượng. Bật nén (compression) cho các asset để giảm dung lượng truyền tải.  "
},
{
	"uri": "/vi/6-cleanup/",
	"title": "Dọn dẹp tài nguyên  ",
	"tags": [],
	"description": "",
	"content": "🎯 Mục tiêu Xoá toàn bộ tài nguyên (CloudFront Distribution và S3 Bucket) để tránh phát sinh chi phí sau khi hoàn thành Workshop.\n Bước 1 – Xóa CloudFront Distribution  Vào AWS Management Console → CloudFront → Distributions. Chọn Distribution bạn đã tạo. Nhấn Disable để vô hiệu hoá Distribution.  Chờ trạng thái chuyển từ Enabled → Disabled (mất khoảng vài phút).   Sau khi Disabled, chọn Delete để xoá hoàn toàn Distribution.  Xác nhận thao tác xoá khi được yêu cầu.     Bước 2 – Xóa S3 Bucket  Vào AWS Management Console → S3 → Buckets. Chọn bucket lambda-edge-demo-site. Xoá toàn bộ file trong bucket:  Chọn tất cả object → Nhấn Delete → Xác nhận xoá.   Quay lại danh sách bucket → Chọn bucket → Nhấn Delete bucket.  Nhập tên bucket để xác nhận xoá.     Bước 3 – Kiểm tra  Đảm bảo Distribution và Bucket đã được xoá hoàn toàn trong CloudFront và S3. Bạn có thể tạo lại từ đầu nếu cần làm lại Workshop.   ✅ Kết quả:\n Toàn bộ tài nguyên đã được dọn dẹp, không còn phát sinh chi phí duy trì dịch vụ AWS.  "
},
{
	"uri": "/vi/categories/",
	"title": "Categories",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "/vi/tags/",
	"title": "Tags",
	"tags": [],
	"description": "",
	"content": ""
}]